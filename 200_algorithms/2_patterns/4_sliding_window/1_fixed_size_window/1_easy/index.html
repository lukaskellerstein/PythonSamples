<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brute Force vs Sliding Window</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #0d0d1a; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const NUMS = [1, 12, -5, -6, 50, 3];
    const K = 4;

    // Precompute all steps for both approaches
    function computeBruteForceSteps() {
      const steps = [];
      const n = NUMS.length;
      for (let i = 0; i <= n - K; i++) {
        let runningSum = 0;
        for (let j = 0; j < K; j++) {
          runningSum += NUMS[i + j];
          steps.push({
            windowStart: i,
            windowEnd: i + K - 1,
            scanning: i + j,
            currentSum: runningSum,
            complete: j === K - 1,
            avg: j === K - 1 ? runningSum / K : null,
            operation: `sum += ${NUMS[i + j]}`,
            operationCount: steps.length + 1,
          });
        }
      }
      return steps;
    }

    function computeSlidingWindowSteps() {
      const steps = [];
      // Initial window sum
      let windowSum = 0;
      for (let j = 0; j < K; j++) {
        windowSum += NUMS[j];
        steps.push({
          windowStart: 0,
          windowEnd: K - 1,
          phase: "init",
          scanning: j,
          currentSum: windowSum,
          complete: j === K - 1,
          avg: j === K - 1 ? windowSum / K : null,
          operation: `sum += ${NUMS[j]}`,
          added: null,
          removed: null,
          operationCount: steps.length + 1,
        });
      }
      // Slide
      for (let i = K; i < NUMS.length; i++) {
        const removed = NUMS[i - K];
        const added = NUMS[i];
        windowSum = windowSum + added - removed;
        steps.push({
          windowStart: i - K + 1,
          windowEnd: i,
          phase: "slide",
          scanning: null,
          currentSum: windowSum,
          complete: true,
          avg: windowSum / K,
          operation: `sum + ${added} - ${removed}`,
          added: i,
          removed: i - K,
          operationCount: steps.length + 1,
        });
      }
      return steps;
    }

    const bruteSteps = computeBruteForceSteps();
    const slidingSteps = computeSlidingWindowSteps();

    const CELL_SIZE = 72;
    const GAP = 10;

    function ArrayViz({ step, type }) {
      return (
        <div style={{ display: "flex", gap: GAP, justifyContent: "center" }}>
          {NUMS.map((num, idx) => {
            let bg = "#1a1a2e";
            let border = "2px solid #2a2a4a";
            let color = "#6a6a8a";
            let scale = 1;
            let shadow = "none";

            if (type === "brute" && step) {
              const inWindow = idx >= step.windowStart && idx <= step.windowEnd;
              const isScanning = idx === step.scanning;
              if (inWindow) {
                bg = "#1e293b";
                border = "2px solid #3b82f6";
                color = "#93c5fd";
              }
              if (isScanning) {
                bg = "#2563eb";
                border = "2px solid #60a5fa";
                color = "#ffffff";
                scale = 1.1;
                shadow = "0 0 20px rgba(37, 99, 235, 0.5)";
              }
            }

            if (type === "sliding" && step) {
              const inWindow = idx >= step.windowStart && idx <= step.windowEnd;
              if (step.phase === "init") {
                const isScanning = idx === step.scanning;
                if (inWindow) {
                  bg = "#1e293b";
                  border = "2px solid #10b981";
                  color = "#6ee7b7";
                }
                if (isScanning) {
                  bg = "#059669";
                  border = "2px solid #34d399";
                  color = "#ffffff";
                  scale = 1.1;
                  shadow = "0 0 20px rgba(5, 150, 105, 0.5)";
                }
              } else {
                if (inWindow) {
                  bg = "#1e293b";
                  border = "2px solid #10b981";
                  color = "#6ee7b7";
                }
                if (idx === step.added) {
                  bg = "#059669";
                  border = "2px solid #34d399";
                  color = "#ffffff";
                  scale = 1.1;
                  shadow = "0 0 20px rgba(5, 150, 105, 0.5)";
                }
                if (idx === step.removed) {
                  bg = "#7f1d1d";
                  border = "2px solid #ef4444";
                  color = "#fca5a5";
                  scale = 0.95;
                  shadow = "0 0 15px rgba(239, 68, 68, 0.3)";
                }
              }
            }

            return (
              <div
                key={idx}
                style={{
                  width: CELL_SIZE,
                  height: CELL_SIZE,
                  display: "flex",
                  flexDirection: "column",
                  alignItems: "center",
                  justifyContent: "center",
                  borderRadius: 12,
                  background: bg,
                  border,
                  color,
                  fontFamily: "'JetBrains Mono', 'Fira Code', monospace",
                  fontSize: 20,
                  fontWeight: 700,
                  transform: `scale(${scale})`,
                  transition: "all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",
                  boxShadow: shadow,
                  position: "relative",
                }}
              >
                {num}
                <span style={{ fontSize: 10, opacity: 0.4, marginTop: 4, fontWeight: 400 }}>
                  [{idx}]
                </span>
              </div>
            );
          })}
        </div>
      );
    }

    function StepInfo({ step, type }) {
      if (!step) return null;
      const accentColor = type === "brute" ? "#3b82f6" : "#10b981";
      return (
        <div
          style={{
            display: "flex",
            gap: 24,
            justifyContent: "center",
            flexWrap: "wrap",
            marginTop: 16,
          }}
        >
          <div style={{ textAlign: "center" }}>
            <div style={{ fontSize: 11, color: "#6a6a8a", textTransform: "uppercase", letterSpacing: 1 }}>
              Operation
            </div>
            <div
              style={{
                fontFamily: "'JetBrains Mono', monospace",
                color: accentColor,
                fontSize: 16,
                marginTop: 4,
                fontWeight: 600,
              }}
            >
              {step.operation}
            </div>
          </div>
          <div style={{ textAlign: "center" }}>
            <div style={{ fontSize: 11, color: "#6a6a8a", textTransform: "uppercase", letterSpacing: 1 }}>
              Current Sum
            </div>
            <div style={{ color: "#e2e8f0", fontSize: 20, marginTop: 4, fontWeight: 700 }}>
              {step.currentSum}
            </div>
          </div>
          {step.avg !== null && (
            <div style={{ textAlign: "center" }}>
              <div style={{ fontSize: 11, color: "#6a6a8a", textTransform: "uppercase", letterSpacing: 1 }}>
                Average
              </div>
              <div style={{ color: "#fbbf24", fontSize: 20, marginTop: 4, fontWeight: 700 }}>
                {step.avg.toFixed(2)}
              </div>
            </div>
          )}
          <div style={{ textAlign: "center" }}>
            <div style={{ fontSize: 11, color: "#6a6a8a", textTransform: "uppercase", letterSpacing: 1 }}>
              Ops Done
            </div>
            <div style={{ color: "#f87171", fontSize: 20, marginTop: 4, fontWeight: 700 }}>
              {step.operationCount}
            </div>
          </div>
        </div>
      );
    }

    function SlidingWindowViz() {
      const [bruteIdx, setBruteIdx] = useState(0);
      const [slideIdx, setSlideIdx] = useState(0);
      const [playing, setPlaying] = useState(false);
      const [speed, setSpeed] = useState(600);
      const intervalRef = useRef(null);

      const bruteStep = bruteSteps[bruteIdx] || null;
      const slideStep = slidingSteps[slideIdx] || null;

      const bruteDone = bruteIdx >= bruteSteps.length - 1;
      const slideDone = slideIdx >= slidingSteps.length - 1;
      const allDone = bruteDone && slideDone;

      useEffect(() => {
        if (playing && !allDone) {
          intervalRef.current = setInterval(() => {
            setBruteIdx((prev) => Math.min(prev + 1, bruteSteps.length - 1));
            setSlideIdx((prev) => Math.min(prev + 1, slidingSteps.length - 1));
          }, speed);
        }
        return () => clearInterval(intervalRef.current);
      }, [playing, allDone, speed]);

      useEffect(() => {
        if (allDone) setPlaying(false);
      }, [allDone]);

      const reset = () => {
        setPlaying(false);
        setBruteIdx(0);
        setSlideIdx(0);
      };

      const stepForward = () => {
        setBruteIdx((prev) => Math.min(prev + 1, bruteSteps.length - 1));
        setSlideIdx((prev) => Math.min(prev + 1, slidingSteps.length - 1));
      };

      return (
        <div
          style={{
            minHeight: "100vh",
            background: "#0d0d1a",
            color: "#e2e8f0",
            fontFamily:
              "'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",
            padding: "40px 20px",
          }}
        >
          <div style={{ maxWidth: 720, margin: "0 auto" }}>
            {/* Title */}
            <div style={{ textAlign: "center", marginBottom: 40 }}>
              <h1
                style={{
                  fontSize: 28,
                  fontWeight: 800,
                  margin: 0,
                  background: "linear-gradient(135deg, #3b82f6, #10b981)",
                  WebkitBackgroundClip: "text",
                  WebkitTextFillColor: "transparent",
                  letterSpacing: -0.5,
                }}
              >
                Brute Force vs Sliding Window
              </h1>
              <p style={{ color: "#6a6a8a", fontSize: 14, marginTop: 8 }}>
                Array: [{NUMS.join(", ")}] &nbsp;&middot;&nbsp; k = {K} &nbsp;&middot;&nbsp; Find max average
                subarray
              </p>
            </div>

            {/* Controls */}
            <div
              style={{
                display: "flex",
                gap: 12,
                justifyContent: "center",
                marginBottom: 36,
                flexWrap: "wrap",
              }}
            >
              <button
                onClick={() => setPlaying(!playing)}
                disabled={allDone}
                style={{
                  padding: "10px 28px",
                  borderRadius: 10,
                  border: "none",
                  background: allDone
                    ? "#2a2a4a"
                    : "linear-gradient(135deg, #3b82f6, #10b981)",
                  color: allDone ? "#6a6a8a" : "#fff",
                  fontWeight: 700,
                  fontSize: 14,
                  cursor: allDone ? "default" : "pointer",
                  transition: "all 0.2s",
                }}
              >
                {playing ? "\u23F8 Pause" : "\u25B6 Play"}
              </button>
              <button
                onClick={stepForward}
                disabled={allDone || playing}
                style={{
                  padding: "10px 20px",
                  borderRadius: 10,
                  border: "1px solid #2a2a4a",
                  background: "#1a1a2e",
                  color: allDone || playing ? "#4a4a6a" : "#e2e8f0",
                  fontWeight: 600,
                  fontSize: 14,
                  cursor: allDone || playing ? "default" : "pointer",
                }}
              >
                Step &rarr;
              </button>
              <button
                onClick={reset}
                style={{
                  padding: "10px 20px",
                  borderRadius: 10,
                  border: "1px solid #2a2a4a",
                  background: "#1a1a2e",
                  color: "#e2e8f0",
                  fontWeight: 600,
                  fontSize: 14,
                  cursor: "pointer",
                }}
              >
                &#8634; Reset
              </button>
              <select
                value={speed}
                onChange={(e) => setSpeed(Number(e.target.value))}
                style={{
                  padding: "10px 16px",
                  borderRadius: 10,
                  border: "1px solid #2a2a4a",
                  background: "#1a1a2e",
                  color: "#e2e8f0",
                  fontWeight: 600,
                  fontSize: 14,
                  cursor: "pointer",
                }}
              >
                <option value={1000}>Slow</option>
                <option value={600}>Normal</option>
                <option value={300}>Fast</option>
              </select>
            </div>

            {/* Brute Force Section */}
            <div
              style={{
                background: "#12122a",
                borderRadius: 16,
                padding: 28,
                marginBottom: 20,
                border: "1px solid #1e1e3a",
              }}
            >
              <div
                style={{
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "space-between",
                  marginBottom: 20,
                }}
              >
                <div>
                  <h2
                    style={{
                      margin: 0,
                      fontSize: 18,
                      fontWeight: 700,
                      color: "#3b82f6",
                    }}
                  >
                    Brute Force
                  </h2>
                  <span style={{ fontSize: 12, color: "#6a6a8a" }}>O(n &times; k) &mdash; recalculates entire window each time</span>
                </div>
                <div
                  style={{
                    background: bruteDone ? "#1e3a5f" : "#1a1a2e",
                    padding: "6px 14px",
                    borderRadius: 8,
                    fontSize: 13,
                    fontFamily: "monospace",
                    color: bruteDone ? "#60a5fa" : "#6a6a8a",
                    fontWeight: 600,
                  }}
                >
                  {bruteIdx + 1} / {bruteSteps.length} ops
                </div>
              </div>
              <ArrayViz step={bruteStep} type="brute" />
              <StepInfo step={bruteStep} type="brute" />
              {bruteDone && (
                <div style={{ textAlign: "center", marginTop: 12, color: "#60a5fa", fontSize: 13, fontWeight: 600 }}>
                  &#10003; Done &mdash; {bruteSteps.length} operations total
                </div>
              )}
            </div>

            {/* Sliding Window Section */}
            <div
              style={{
                background: "#122a22",
                borderRadius: 16,
                padding: 28,
                marginBottom: 28,
                border: "1px solid #1e3a2e",
              }}
            >
              <div
                style={{
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "space-between",
                  marginBottom: 20,
                }}
              >
                <div>
                  <h2 style={{ margin: 0, fontSize: 18, fontWeight: 700, color: "#10b981" }}>
                    Sliding Window
                  </h2>
                  <span style={{ fontSize: 12, color: "#6a6a8a" }}>O(n) &mdash; reuses previous sum, adds/removes one element</span>
                </div>
                <div
                  style={{
                    background: slideDone ? "#1a3a2a" : "#1a1a2e",
                    padding: "6px 14px",
                    borderRadius: 8,
                    fontSize: 13,
                    fontFamily: "monospace",
                    color: slideDone ? "#34d399" : "#6a6a8a",
                    fontWeight: 600,
                  }}
                >
                  {slideIdx + 1} / {slidingSteps.length} ops
                </div>
              </div>
              <ArrayViz step={slideStep} type="sliding" />
              <StepInfo step={slideStep} type="sliding" />
              {slideDone && (
                <div style={{ textAlign: "center", marginTop: 12, color: "#34d399", fontSize: 13, fontWeight: 600 }}>
                  &#10003; Done &mdash; {slidingSteps.length} operations total
                </div>
              )}
            </div>

            {/* Comparison Summary */}
            {allDone && (
              <div
                style={{
                  background: "linear-gradient(135deg, #1a1a3a, #1a2a2a)",
                  borderRadius: 16,
                  padding: 28,
                  border: "1px solid #2a2a4a",
                  textAlign: "center",
                }}
              >
                <h3 style={{ margin: "0 0 16px", fontSize: 18, fontWeight: 700, color: "#fbbf24" }}>
                  Key Insight
                </h3>
                <div style={{ display: "flex", justifyContent: "center", gap: 40, flexWrap: "wrap" }}>
                  <div>
                    <div style={{ fontSize: 36, fontWeight: 800, color: "#3b82f6" }}>
                      {bruteSteps.length}
                    </div>
                    <div style={{ fontSize: 12, color: "#6a6a8a" }}>Brute Force ops</div>
                  </div>
                  <div style={{ fontSize: 36, fontWeight: 300, color: "#4a4a6a", alignSelf: "center" }}>
                    vs
                  </div>
                  <div>
                    <div style={{ fontSize: 36, fontWeight: 800, color: "#10b981" }}>
                      {slidingSteps.length}
                    </div>
                    <div style={{ fontSize: 12, color: "#6a6a8a" }}>Sliding Window ops</div>
                  </div>
                </div>
                <p style={{ color: "#94a3b8", fontSize: 14, marginTop: 16, lineHeight: 1.6, maxWidth: 500, margin: "16px auto 0" }}>
                  Brute force re-sums the entire window from scratch for each position.
                  Sliding window <strong style={{ color: "#10b981" }}>reuses the previous sum</strong>, only
                  adding the new element and removing the old one â€” turning O(n&times;k) into O(n).
                </p>
              </div>
            )}
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<SlidingWindowViz />);
  </script>
</body>
</html>
